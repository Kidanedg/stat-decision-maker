<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Statistical Decision Maker</title>
</head>
<body>
    <h2>Upload CSV:</h2>
    <form method="POST" enctype="multipart/form-data">
        <input type="file" name="file" required><br><br>

        {% if columns %}
            <label for="method">Choose Analysis Method:</label><br>
            <select name="method" required>
                <option value="">-- Select Method --</option>
                <option value="t-test">Two-Sample t-Test</option>
                <option value="anova">One-Way ANOVA</option>
                <option value="regression">Linear Regression</option>
                <option value="correlation">Pearson Correlation</option>
                <option value="timeseries">Time Series Plot</option>
                <option value="chi-square">Chi-Square Test</option>
            </select><br><br>

            <label for="col1">Select Column 1:</label><br>
            <select name="col1" required>
                {% for col in columns %}
                    <option value="{{ col }}">{{ col }}</option>
                {% endfor %}
            </select><br><br>

            <label for="col2">Select Column 2 (optional):</label><br>
            <select name="col2">
                <option value="">-- None --</option>
                {% for col in columns %}
                    <option value="{{ col }}">{{ col }}</option>
                {% endfor %}
            </select><br><br>
        {% endif %}

        <input type="submit" value="Submit">
    </form>

    {% if result %}
        <hr>
        <h3>Analysis Result:</h3>
        {% if result.error %}
            <p style="color:red;">‚ùå {{ result.error }}</p>
        {% else %}
            <p><strong>{{ result.test }}</strong></p>
            {% if result.statistic is defined %}
                <p>Statistic: {{ result.statistic }}</p>
            {% endif %}
            {% if result.p_value is defined %}
                <p>p-Value: {{ result.p_value }}</p>
            {% endif %}
            {% if result.decision %}
                <p><strong>Decision:</strong> {{ result.decision }}</p>
            {% endif %}

            {% if result.plot %}
                <h4>Plot:</h4>
                <img src="{{ url_for('static', filename=result.plot) }}" width="500">
            {% endif %}
        {% endif %}
    {% endif %}
</body>
</html>
