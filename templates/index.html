<!DOCTYPE html>
<html>
<head>
    <title>Statistical Decision Maker</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        form { margin-bottom: 30px; }
        select, input[type="file"], button {
            padding: 5px; margin: 10px 0; width: 300px;
        }
        img { max-width: 600px; margin-top: 20px; }
        .result { background: #f9f9f9; padding: 20px; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h2>üìä Statistical Decision Maker</h2>

    <form method="POST" enctype="multipart/form-data">
        <label>Upload CSV:</label><br>
        <input type="file" name="file" required><br>

        {% if columns %}
            <label>Choose Analysis Method:</label><br>
            <select name="method" required>
                <option value="t_test">Two-Sample t-Test</option>
                <option value="anova">One-way ANOVA</option>
                <option value="histogram">Histogram</option>
                <option value="timeseries">Time Series</option>
                <option value="regression">Simple Linear Regression</option>
            </select><br>

            <label>Select Column 1:</label><br>
            <select name="col1" required>
                {% for col in columns %}
                    <option value="{{ col }}">{{ col }}</option>
                {% endfor %}
            </select><br>

            <label>Select Column 2 (optional):</label><br>
            <select name="col2">
                <option value="">-- None --</option>
                {% for col in columns %}
                    <option value="{{ col }}">{{ col }}</option>
                {% endfor %}
            </select><br>
        {% endif %}

        <button type="submit">Submit</button>
    </form>

    {% if result %}
        <div class="result">
            <h3>Results:</h3>
            {% if result.error %}
                <p style="color: red;">‚ùå Error: {{ result.error }}</p>
            {% else %}
                {% if result.test %}
                    <p><strong>Test:</strong> {{ result.test }}</p>
                {% endif %}
                {% if result.statistic %}
                    <p><strong>Statistic:</strong> {{ result.statistic }}</p>
                {% endif %}
                {% if result.p_value %}
                    <p><strong>p-value:</strong> {{ result.p_value }}</p>
                {% endif %}
                {% if result.decision %}
                    <p><strong>Decision:</strong> {{ result.decision }}</p>
                {% endif %}
                {% if result.plot %}
                    <p><strong>Plot:</strong></p>
                    <img src="/static/plots/{{ result.plot }}">
                {% endif %}
            {% endif %}
        </div>
    {% endif %}
</body>
</html>
