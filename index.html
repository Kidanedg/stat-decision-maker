<!DOCTYPE html>
<html>
<head>
    <title>Statistical Decision Maker</title>
</head>
<body>
    <h2>Statistical Decision Maker</h2>
    <form method="POST" enctype="multipart/form-data">
        <label>Upload CSV:</label><br>
        <input type="file" name="file" required><br><br>

        {% if columns %}
            <label>Choose Analysis Method:</label><br>
            <select name="method">
                <option value="t_test">Two-Sample t-Test</option>
                <option value="anova">One-way ANOVA</option>
                <option value="histogram">Histogram</option>
                <option value="timeseries">Time Series</option>
                <option value="regression">Simple Linear Regression</option>
            </select><br><br>

            <label>Select Column 1:</label><br>
            <select name="col1">
                {% for col in columns %}
                    <option value="{{ col }}">{{ col }}</option>
                {% endfor %}
            </select><br><br>

            <label>Select Column 2 (optional):</label><br>
            <select name="col2">
                <option value="">-- None --</option>
                {% for col in columns %}
                    <option value="{{ col }}">{{ col }}</option>
                {% endfor %}
            </select><br><br>

            <button type="submit">Submit</button>
        {% else %}
            <button type="submit">Upload</button>
        {% endif %}
    </form>

    {% if result %}
        <h3>Results:</h3>
        {% if result.error %}
            <p style="color: red;">Error: {{ result.error }}</p>
        {% else %}
            {% if result.test %}
                <p><strong>Test:</strong> {{ result.test }}</p>
            {% endif %}
            {% if result.statistic %}
                <p><strong>Statistic:</strong> {{ result.statistic }}</p>
            {% endif %}
            {% if result.p_value %}
                <p><strong>p-value:</strong> {{ result.p_value }}</p>
            {% endif %}
            {% if result.decision %}
                <p><strong>Decision:</strong> {{ result.decision }}</p>
            {% endif %}
            {% if result.plot %}
                <h4>Plot:</h4>
                <img src="/static/plots/{{ result.plot }}" width="500">
            {% endif %}
        {% endif %}
    {% endif %}
</body>
</html>
